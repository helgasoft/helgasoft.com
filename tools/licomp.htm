<html>
<head>
  <meta charset="utf-8">
  <title>Compare Lists</title>
  <style>
	body { font: normal 16px Calibri, Verdana, Arial, sans-serif; }
	td { vertical-align:top; }
	table {
	    border-collapse: separate;
	    border-spacing: 10px;
	}
	.txt {font-size:small}
	.rslt {
	    display: table-cell;
	    border: solid #55A 1px;
	    border-style: solid none none none;
	    /* background-color:#AAF; */
	}
	button:active { border: solid #F55 2px; background:#FBB;}
	table.CoreTable
	{
	    border-collapse: collapse;
	    width: 90%;
	    text-align: center;
	}
	textarea { 
	    resize:both; max-height:500px; min-height:100px; 
	    /* border: none; */
	    width: 100%;
	    -webkit-box-sizing: border-box; /* <=iOS4, <= Android  2.3 */
	       -moz-box-sizing: border-box; /* FF1+ */
	            box-sizing: border-box; /* Chrome, IE8, Opera, Safari 5.1*/
	}
  </style>
  <script type="text/javascript">
// Copyright Â©  Helgasoft.com   All Rights Reserved
function sorta() {
	var list1 = document.getElementById("TextBox1").value.replace(/\r\n/g,"\n").split("\n");
	var list2 = document.getElementById("TextBox2").value.replace(/\r\n/g,"\n").split("\n");
	list1.sort();
	list2.sort();
	document.getElementById("TextBox1").value = list1.join("\n");
	document.getElementById("TextBox2").value = list2.join("\n");
	document.getElementById("timer").innerText = "";
}
function deldup(me) {
	var startTime = Date.now();
	var save1, save2;
	save1 = document.getElementById("TextBox1").value.replace(/\r\n/g,"\n").split("\n");
	save2 = document.getElementById("TextBox2").value.replace(/\r\n/g,"\n").split("\n");
	list1 = save1.filter(function(item, pos, self) { return self.indexOf(item) == pos; })
	list2 = save2.filter(function(item, pos, self) { return self.indexOf(item) == pos; })
	document.getElementById("TextBox1").value = list1.join("\n");
	document.getElementById("TextBox2").value = list2.join("\n");
	leni('TextBox1', 'lbl1');
	leni('TextBox2', 'lbl2');
	elapsed(startTime);
}
function compir() {
	// TODO: 'processing..' msg for long lists
	var startTime = Date.now();

	var list1 = document.getElementById("TextBox1").value.replace(/\r\n/g,"\n").split("\n");
	var list2 = document.getElementById("TextBox2").value.replace(/\r\n/g,"\n").split("\n");
	var dup1, dup2;
	
	//Find values that are in list1 but not in list2
	var uniqueResultOne = list1.filter(function(obj) {
	    return !list2.some(function(obj2) {
	        return obj == obj2;
	    });
	});

	//Find values that are in list2 but not in list1
	var uniqueResultTwo = list2.filter(function(obj) {
	    return !list1.some(function(obj2) {
	        return obj == obj2;
	    });
	});
	document.getElementById('uniq1').value = uniqueResultOne.join('\n');
	document.getElementById('uniq2').value = uniqueResultTwo.join('\n');
	leni('uniq1', 'lbl3');
	leni('uniq2', 'lbl4');

	//find duplicates
	dup1 = list1.filter(function(item, pos, self) {
	    return self.indexOf(item) != pos;
	})
	dup2 = list2.filter(function(item, pos, self) {
	    return self.indexOf(item) != pos;
	})
	document.getElementById('dupl1').value = dup1.join('\n');
	document.getElementById('dupl2').value = dup2.join('\n');
	leni('dupl1', 'lbl6');
	leni('dupl2', 'lbl7');
	
	//Find values that are both in list2 and list1
	var commonResult = list2.filter(function(obj) {
	    return list1.some(function(obj2) {
	        return obj == obj2;
	    });
	});
	
	document.getElementById('common').value = commonResult.join('\n');
	leni('common', 'lbl5');

	leni('TextBox1', 'lbl1');
	leni('TextBox2', 'lbl2');
	elapsed(startTime);
}
function leni(meid,lbl) {
	var text = typeof(meid)=="string" ? document.getElementById(meid).value : document.getElementById(meid.id).value;
	if (text.length == 0) {
		document.getElementById(lbl).innerText = '(none)';
		return;
	}
	var rows = text.split("\n").length;
	document.getElementById(lbl).innerText = rows + ' items'; 
}
function elapsed(st) {
   	var ms = Date.now() - st; //, min = (ms/1000/60) << 0, sec = (ms/1000) % 60;
	var sec = Math.floor(ms / 1000);
	var min = Math.floor(sec / 60);
	sec = sec - (min * 60);
	var timer = document.getElementById("timer");
	timer.innerText = "Finished in " + min + ":" + pad(sec) + " (min:sec)";
}
function pad(n) { if (n < 10 & n >=0) return ("0" + n); if(n < 0 & n > -11) return ("-0" + Math.abs(n)); return n; }
  </script>
</head>
<body>

    <div style="text-align:center"><h3 style="display:inline;margin-right:30px">Compare Lists</h3> 
	<div class='txt' style="display:inline;"></div></div>

<table border='0' class="CoreTable">
  <tr>
	<td width="14%"><b>Input Lists</b></td>
        <td width="43%">First  <br /><textarea id="TextBox1" onchange="leni(this,'lbl1')" tabindex=1 placeholder="paste one item per line"></textarea><br /><label id="lbl1" class='txt'></label></td>
        <td>Second  <br /><textarea id="TextBox2" onchange="leni(this,'lbl2')" tabindex=2 placeholder="paste one item per line"></textarea><br /><label id="lbl2" class='txt'></label></td>
    	</tr>
  <tr>
	<td>&nbsp;</td>
	<td colspan=2 style="text-align:center; padding:10;">
		<button onclick="sorta()" style="width:44px;" >sort</button>
		<button onclick='deldup(this)' style="width:124px;" >delete duplicates</button> &nbsp; &nbsp;
		<button onclick='compir()' style="width:90px;" tabindex=3 ><b>Compare</b></button>
		<br /><div id="timer" class="txt"></div>
	</td>
	</tr>
  <tr>
	<td>&nbsp;</td>
	<td colspan=2 class="rslt"></tr>
  <tr>
	<td><b>Unique</b> </td>
        <td><textarea id="uniq1"></textarea><br /><label id="lbl3" class='txt'></label></td>
        <td><textarea id="uniq2"></textarea><br /><label id="lbl4" class='txt'></label></td></tr>
  <tr>
	<td><b>Duplicate</b> </td>
        <td><textarea id="dupl1"></textarea><br /><label id="lbl6" class='txt'></label></td>
        <td><textarea id="dupl2"></textarea><br /><label id="lbl7" class='txt'></label></td>
	</tr>
  <tr>
	<td><b>Common</b>
        <td colspan=2>
		<div style="text-align:center"><textarea id="common" style="width:50% !important"></textarea><br /><label id="lbl5" class='txt'></label></div></td>
	</tr>
</table>

<p>&nbsp;<br />
<b>Note</b>:  Firefox or MS Edge browser recommended, Chrome is slower.<br />
Time estimate for 80K lists on Intel i5 processor is 7-8 minutes.<br />
While Compare button is <span style='color:#FF5555'>red</span>, browser is still working, please do not interrupt.<br />
If prompted by browser, select <i>Continue</i> or <i>Wait</i> for processing to complete.
</p>

</body>
</html>
